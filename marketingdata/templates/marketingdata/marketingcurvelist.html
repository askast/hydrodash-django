{% extends "profiles/stislabase.html" %}


{% block extrahead %}
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap4.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/select/1.3.0/css/select.bootstrap4.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/1.0.7/css/responsive.dataTables.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/1.5.6/css/buttons.dataTables.min.css">


<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js" defer type="text/javascript"></script>
<script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js" defer type="text/javascript"></script>
<script src="https://cdn.datatables.net/select/1.3.0/js/dataTables.select.min.js" defer type="text/javascript"></script>
<script src="https://cdn.datatables.net/select/1.3.0/js/select.bootstrap4.min.js" defer type="text/javascript"></script>
<script src="https://cdn.datatables.net/plug-ins/1.10.19/dataRender/datetime.js" defer type="text/javascript"></script>
<script src="https://cdn.datatables.net/responsive/1.0.7/js/dataTables.responsive.min.js" defer type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.26/moment-timezone-with-data.min.js" defer type="text/javascript"></script>
<script src="https://cdn.datatables.net/buttons/1.5.6/js/dataTables.buttons.min.js" defer type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js" defer type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js" defer type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js" defer type="text/javascript"></script>
<script src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.html5.min.js" defer type="text/javascript"></script>
<script src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.print.min.js" defer type="text/javascript"></script>
<script src="https://cdn.datatables.net/buttons/1.5.6/js/buttons.colVis.min.js" defer type="text/javascript"></script>

{% endblock %}
 
{% block content %}

<div class="main-content">
    <section class="section">
        <div class="section-header">
            <h1>Performance Curves Lists</h1>
            <div class="section-header-breadcrumb">
                <div class="breadcrumb-item active"><a href="#">Dashboard</a></div>
                <div class="breadcrumb-item"><a href="#">Reduced Test Data</a></div>
                <div class="breadcrumb-item">Test List</div>
            </div>
        </div>

        <div class="section-body">
            <h2 class="section-title">Performance Curves</h2>
            <p class="section-lead">Double click any line to view peformance plots and other
                details.
            </p>
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h4>Commercial Efficiency Tests</h4>
                        </div>
                        <div class="card-body">
                            <table class="table table-hover responsive" id="table1">
                                <thead>
                                    <th>ID</th>
                                    <th>Curve Name</th>
                                    <th>BEP Flow</th>
                                    <th>Bep Head</th>
                                    <th>BEP Efficiency</th>
                                    <th>PEIcl</th>
                                    <th>PEIvl</th>
                                    <th>Pump Type</th>
                                    <th>Impeller Diameter</th>
                                    <th>Full Trim</th>
                                    <th>RPM</th>
                                    <th>Data Source</th>
                                    <th>Head Coefficients</th>
                                    <th>Efficiency Coefficients</th>
                                </thead>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

<script>
    $(document).ready(function () {

        var table1 = $('#table1').DataTable({
            autoWidth: false,
            buttons: [
                'copy'
            ],
            select: {
                style: 'multi'
            },
            order: [
                [0, "desc"]
            ],
            columnDefs: [{
                    className: "text-center",
                    targets: [0, 5, 6]
                },
                {
                    targets: [2, 3, 4, 5, 6],
                    render: function (data) {
                        if (data == null)
                            return null
                        else
                            return parseFloat(data).toFixed(2);
                    }
                },
                {
                    render: function (data, type, row, ) {
                        return (data === true) ?
                            data = '<span class="true">✔</span>' :
                            data = '<span class="false">✘</span>';
                    },
                    targets: 9
                }
            ],
            responsive: true,
            searching: true,
            processing: true,
            serverSide: true,
            stateSave: true,
            ajax: "{% url 'marketinglistdata' %}",
        });
        
        table1.buttons().container().insertBefore( '#table1_filter' );

        table1.on('dblclick', 'tr', function () {
            var id = (table1.row(this).data())[0]
            console.log(id);
            window.location = "{% url 'marketingcurveview' %}?curveid=" + id;
        });
        
    });
</script>
{% endblock content%}